"use strict";var e=e||{};e.scope={},e.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},e.arrayIterator=function(t){return{next:e.arrayIteratorImpl(t)}},e.ASSUME_ES5=!1,e.ASSUME_NO_NATIVE_MAP=!1,e.ASSUME_NO_NATIVE_SET=!1,e.SIMPLE_FROUND_POLYFILL=!1,e.ISOLATE_POLYFILLS=!1,e.defineProperty=e.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,l){return e==Array.prototype||e==Object.prototype||(e[t]=l.value),e},e.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var l=e[t];if(l&&l.Math==Math)return l}throw Error("Cannot find global object")},e.global=e.getGlobal(this),e.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),e.TRUST_ES6_POLYFILLS=!e.ISOLATE_POLYFILLS||e.IS_SYMBOL_NATIVE,e.polyfills={},e.propertyToPolyfillSymbol={},e.POLYFILL_PREFIX="$jscp$";e.polyfill=function(t,l,n,o){l&&(e.ISOLATE_POLYFILLS?e.polyfillIsolated(t,l,n,o):e.polyfillUnisolated(t,l,n,o))},e.polyfillUnisolated=function(t,l,n,o){for(n=e.global,t=t.split("."),o=0;o<t.length-1;o++){var r=t[o];r in n||(n[r]={}),n=n[r]}(l=l(o=n[t=t[t.length-1]]))!=o&&null!=l&&e.defineProperty(n,t,{configurable:!0,writable:!0,value:l})},e.polyfillIsolated=function(t,l,n,o){var r=t.split(".");t=1===r.length,o=r[0],o=!t&&o in e.polyfills?e.polyfills:e.global;for(var s=0;s<r.length-1;s++){var i=r[s];i in o||(o[i]={}),o=o[i]}r=r[r.length-1],null!=(l=l(n=e.IS_SYMBOL_NATIVE&&"es6"===n?o[r]:null))&&(t?e.defineProperty(e.polyfills,r,{configurable:!0,writable:!0,value:l}):l!==n&&(e.propertyToPolyfillSymbol[r]=e.IS_SYMBOL_NATIVE?e.global.Symbol(r):e.POLYFILL_PREFIX+r,r=e.propertyToPolyfillSymbol[r],e.defineProperty(o,r,{configurable:!0,writable:!0,value:l})))},e.initSymbol=function(){},e.initSymbolIterator=function(){},e.initSymbolAsyncIterator=function(){},e.iteratorPrototype=function(e){return(e={next:e})[Symbol.iterator]=function(){return this},e},e.polyfill("String.prototype.matchAll",(function(e){return e||function(e){if(e instanceof RegExp&&!e.global)throw new TypeError("RegExp passed into String.prototype.matchAll() must have global tag.");var t=new RegExp(e,e instanceof RegExp?void 0:"g"),l=this,n=!1,o={next:function(){var e={},o=t.lastIndex;if(n)return{value:void 0,done:!0};var r=t.exec(l);return r?(t.lastIndex===o&&(t.lastIndex+=1),e.value=r,e.done=!1,e):(n=!0,{value:void 0,done:!0})}};return o[Symbol.iterator]=function(){return o},o}}),"es_2020","es3");let t={black:[30,40],red:[31,41],magenta:[35,45],yellow:[33,43],green:[32,42],brightRed:[91,40],brightGreen:[92,42],brightYellow:[93,43]};function l(e="",l,n){return`[39m${l="["+l(t)[0]+"m"}${n=(n=n?n(t)[1]:null)?"["+n+"m":""}${e}${n?"[39m[49m":"[39m"}`}var n=(e="",t)=>l(e,(e=>e.red),t),o=(e="",t)=>l(e,(e=>e.magenta),t),r=(e="",t)=>l(e,(e=>e.yellow),t);function s(e){return(...t)=>{var l;let[s,i]=[n(e.split(":").slice(0,1).pop()),o(e.split(":").slice(1).join(":"))];null!==(l=process.env.DEBUG)&&void 0!==l&&l.includes("v-press-plus")&&console.error(`${s}${r(":")}${i}${r("->")} `,...t)}}let i=s("v-press-plus:calcTemplateBlock");function a(e,t,l){e.line=l;let n=e.push("html_block","",0);return n.map=[t,l],n.content=e.getLines(t,l,e.blkIndent,!0),!0}let c=s("v-press-plus:slot-tokens");function u(e,t,l,n,o){t=[...t.interior.matchAll(/<template.*?[^/]>/gs)].map((e=>e[0])).filter((e=>e.includes("md-slot"))),c('this tag\'s interior does have "md-slot" content'),c(`there are ${t.length} template tags with md-slot set`);let r=t.reduce(((e,t)=>(e.push(function(e,t,l){let n=(e=e.split("\n")).findIndex((e=>e.includes(t)))+l+1,o=e.slice(n-l).findIndex((e=>e.includes("</template")))+n+1;return i("Evaluating template block: ",{lines:`${l} to ${l+e.length}`,openTag:t,start:n,end:o}),[n,o]}(l,t,n)),e)),[]);c("line number boundaries for md-slot tags:",r);let s=n;return r.forEach(((t,l)=>{let[n,i]=t;a(e,s,n-1),c(`added block token from ${s} to ${n-1}`),l===r.length-1&&(a(e,i+1,o),c(`added block token from ${i+1} to ${o}; to close out md-slots`)),s=i+1})),!0}let p=s("v-press-plus");var d=new RegExp("^(?:<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>|<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>)"),f="address article aside base basefont blockquote body caption center col colgroup dd details dialog dir div dl dt fieldset figcaption figure footer form frame frameset h1 h2 h3 h4 h5 h6 head header hr html iframe legend li link main menu menuitem meta nav noframes ol optgroup option p param section source summary table tbody td tfoot th thead title tr track ul".split(" ");let g=/^<\/\w+/s,m=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^\x3c!--/,/--\x3e/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[/^<[A-Z]/,/>/,!0],[/^<\w+\-/,/>/,!0],[new RegExp("^</?("+f.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[/^<([a-z]+[a-z|0-9|-]*)[\w|-|\s]*?>/,/___DO NOT FIND__/,!0],[/^<([A-Z]+[a-z|A-Z|0-9]*)[\w|-|\s]*?>/,/___DO NOT FIND__/,!0],[new RegExp(d.source+"\\s*$"),/^$/,!1]],b=s("v-press-plus:start-block");let h=s("v-press-plus:htmlBlock"),y=(...e)=>(e&&0<e.length?(e=e.map((e=>function(e){let[,t,l,n]=/^(\s*)(.*?)(\s*)$/.exec(e);return`${t}${(e=>e.replace(/[A-Z]/g,(e=>`-${e[0].toLowerCase()}`)))(l).replace(/\s/gs,"-").replace(/-+/g,"-").replace(/^-/s,"").replace(/-$/s,"").replace(/_/g,"-")}${n}`}(e))),h("the following VueJS components will be treated as BLOCK elements: ",e)):h('no VueJS components were registered to be treated as BLOCK elements; you may add the "md-block" property to a component to make it become a block element.'),(t,l,n,o)=>{let r,s,i=t.bMarks[l]+t.tShift[l],c=t.eMarks[l];const d=t.src.slice(i);if(s=t.src.slice(i,c),h("evaluating",{src:t.src.slice(i,c),pos:i,max:c}),g.test(d))return h("returning false for bare end tag:",d),!1;if(!t.md.options.html)return h("returning false due to markdown options",d),!1;if(60!==t.src.charCodeAt(i))return h('returning false as block doesn\'t start with "<": ',s),!1;if(4<=t.sCount[l]-t.blkIndent)return h(`- returning false due to indentation [ ${t.sCount[l]}, ${t.blkIndent} ]; if it's indented more than 3 spaces, it should be a code block.`),!1;const y=function(e,t=[]){let l=/\s*(\w+)="(.*?)"/gs;return 1<(e=[...e.matchAll(/^<([a-z|0-9|-]+)([^\0]*?)>([^\0]*?)(<\/\1[^\0]*?>)/gs)].reduce(((e,n)=>{const o=n[1];var r=n[2].replace(/\s*[\w:]+?=".*?"/g,"").split(/\s+/).filter((e=>e)).map((e=>["flag",e,void 0]));return r=[...n[2].matchAll(l),...r].reduce(((e,t)=>{const[,l,n]=t;return l&&(e[l]=void 0===n?"":n),e}),{}),n={tag:o,tagProps:r,isMdBlock:Object.keys(r).includes("md-block")||t.includes(o),isMdSlot:"template"===o&&Object.keys(r).includes("md-slot"),interior:n[3],closure:n[4]},e.push(n),e}),[])).length&&(console.warn(`the blockMeta function returned more than one block [${e.length}], it should not.`),p(`blockMeta ended with ${e.length} blocks instead of the expected 1:`,{blocks:e})),e[0]}(d,e);if(y)return h(`processing "${y.tag}":\n${JSON.stringify(y,null,2)}`),[...e,...f].includes(y.tag)||y.isMdBlock?(n=function(e,t,l){let n=!1;return t=t.split("\n").reduce(((t,l)=>(l.includes(e)||n?n=!0:t.push(l),t)),[]),l+t.length+1}(y.closure,d,l),h(`${y.tag} is a BLOCK element [ ${l}, ${n} ]`),y.interior.includes("md-slot")?u(t,y,d,l,n):a(t,l,n)):(h(`- ${y.tag} is an INLINE element [ ${l}, ${n} ] so returning false to prevent block rule`),!1);if(h("processing unknown [no meta]: ",d),!function(e,t){let l;for(l=0;l<m.length;l++)if(m[l][0].test(e))return b(`${m[l][0].toString()} passed with ${e}`),!0;return!t||m[l][2]}(s,o))return!1;for(r=0;r<m.length&&!m[r][0].test(s);r++);if(r===m.length)return!1;if(o)return m[r][2];if(o=l+1,!m[r][1].test(s))for(;o<n&&!(t.sCount[o]<t.blkIndent);o++)if(i=t.bMarks[o]+t.tShift[o],c=t.eMarks[o],s=t.src.slice(i,c),m[r][1].test(s)){0!==s.length&&(h(`skipping a line as line text empty in "${y.tag}"`),o++);break}return h(`adding token to "${y?y.tag:d}" [ ${l} -> ${o} ], ending: ${s} ]`),a(t,l,o),!0});module.exports=(e={components:[]})=>{console.error("registering vuepress PLUGIN",e);let t=y();return{name:"v-press-plus",extendMarkdown:e=>{e.block.ruler.at("html_block",t)}}};
